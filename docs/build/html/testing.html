

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Testing the Federation Service &mdash; CanDIG Federation Service 0.5.5 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Sending a Request" href="examples.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> CanDIG Federation Service
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="run.html">Starting Federation</a></li>
<li class="toctree-l1"><a class="reference internal" href="run.html#incoming-requests">Incoming Requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="run.html#request-flow">Request Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">candig_federation</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Sending a Request</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html#why-no-get">Why No GET?</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Testing the Federation Service</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CanDIG Federation Service</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Testing the Federation Service</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/testing.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="testing-the-federation-service">
<h1>Testing the Federation Service<a class="headerlink" href="#testing-the-federation-service" title="Permalink to this heading">¶</a></h1>
<p>The Pytest library is used for automated testing of the Federation service and is divided into two test files.
The <code class="docutils literal notranslate"><span class="pre">test_network.py</span></code> set of tests are configuration related and check config validation regarding peer servers
and service json files. The bulk of the testing is done in <code class="docutils literal notranslate"><span class="pre">test_uniform_federation.py</span></code>, which tests most
functions in both <code class="docutils literal notranslate"><span class="pre">federation.py</span></code> and <code class="docutils literal notranslate"><span class="pre">operations.py</span></code>. Due to the nature of this service, being an aggregator
and communication tool between other services, many methods need to be mocked to simulate outgoing or incoming
messages from other services.</p>
<p>Additionally, <code class="docutils literal notranslate"><span class="pre">test_local_federation.py</span></code> contains integration tests to check the expected output from unfederated and
federated queries using real data instead of mocked responses. In order to run these, you need to run uwsgi instances in
different ports following the instructions on the README. This simulates communication between two different servers.
Finally, make sure you have access to the services specified in servers.json and that they are currently running.
Since the Travis CI suite doesn’t have access to the servers/services, these tests are skipped during CI when pushing
changes to the repository.</p>
<p>If you are wanting to add more tests to the test suite, the <code class="docutils literal notranslate"><span class="pre">test_structs.py</span></code> found within <code class="docutils literal notranslate"><span class="pre">tests/test_data</span></code>
contain a number of mocked classes to simulate responses along with data structures containing both input and
output data.</p>
<p>The repo is hooked to Travis CI and will have all the tests run upon commit to any branch. If wanting to run the
tests locally, use the following command while in the main directory.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pytest tests/
</pre></div>
</div>
<p>You may add <code class="docutils literal notranslate"><span class="pre">-vv</span></code> to the end for more verbose output, or use the following command to generate a readable html
of the test results:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pytest tests/ --cov<span class="o">=</span>candig_federation --html<span class="o">=</span>test_report.html --self-contained-html
</pre></div>
</div>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="examples.html" class="btn btn-neutral float-left" title="Sending a Request" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2022, Dashaylan Naidoo, Javier Castillo-Arnemann

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>